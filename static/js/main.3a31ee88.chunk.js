(this.webpackJsonprain_or_shine=this.webpackJsonprain_or_shine||[]).push([[0],{13:function(e,t,a){},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),r=a.n(c),s=a(7),i=a.n(s),o=(a(13),a(3)),l=a.n(o),u=a(4),d=a(2),j=a(6);var p=function(e){var t=e.imgData,a=t.addClasses?"icon ".concat(t.addClasses):"icon";return Object(n.jsx)("img",{className:a,src:"".concat(t.path,".svg"),alt:"".concat(t.alt)})};var m=function(e){var t=e.unitType,a=void 0===t?"":t,c=String.fromCharCode(176)+a;return Object(n.jsx)("sup",{className:"degree-symbol",children:c})};var h=function(e){var t=e.handleUnitUpdate,a=Object(c.useState)(!1),r=Object(d.a)(a,2),s=r[0],i=r[1];function o(e){if(e){var a=e.target.id;i(!1),t(a)}}return Object(n.jsxs)("menu",{className:"menu",children:[Object(n.jsx)("button",{className:"btn",onClick:function(){return i(!s)},children:Object(n.jsx)(p,{imgData:{path:"assets/nav/settings",alt:"settings menu icon"}})}),s&&Object(n.jsxs)("div",{className:"menu__extended",children:[Object(n.jsx)("span",{className:"menu-title",children:"Select unit type:"}),Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{type:"radio",id:"imperial",name:"unitType",value:"imperial",onClick:o}),Object(n.jsxs)("label",{htmlFor:"imperial",children:[Object(n.jsx)(m,{unitType:"F"}),Object(n.jsx)("span",{children:" - imperial"})]})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{type:"radio",id:"metric",name:"unitType",value:"metric",onClick:o}),Object(n.jsxs)("label",{htmlFor:"metric",children:[Object(n.jsx)(m,{unitType:"C"}),Object(n.jsx)("span",{children:" - metric"})]})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{type:"radio",id:"kelvin",name:"unitType",value:"kelvin",onClick:o}),Object(n.jsxs)("label",{htmlFor:"kelvin",children:[Object(n.jsx)(m,{unitType:"K"}),Object(n.jsx)("span",{children:" - kelvin"})]})]})]})]})},b={arrow_back:{src:"assets/nav/arrow_back.svg",alt:"back arrow - clears search query"},search:{src:"assets/nav/search.svg",alt:"searches for location"}};var f=function(e){var t=e.icon,a=e.type,c=e.handleClick;return Object(n.jsx)("button",{className:"icon-btn",type:a,onClick:c,children:Object(n.jsx)("img",{className:"icon-btn__icon",src:b[t].src,alt:b[t].alt})})};var y=function(e){var t=e.value,a=e.handleChange,c=e.handleClear,r=e.handleSubmit,s=e.placeholder;return Object(n.jsxs)("form",{className:"form",onSubmit:r,children:[Object(n.jsx)(f,{icon:"arrow_back",type:"button",handleClick:c}),Object(n.jsx)("input",{type:"text",className:"form__input",value:t,onChange:a,placeholder:s||"Search a city..."}),Object(n.jsx)(f,{icon:"search",type:"button",handleClick:r})]})};var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(c.useState)(e),a=Object(d.a)(t,2),n=a[0],r=a[1];function s(e){r(e.target.value)}function i(e){r(e)}return[n,s,i]};function x(e){var t=e.list;return t?t.map((function(e){return Object(n.jsx)("li",{className:"loc-item",id:e.id,children:e.name},e.id)})):null}var O=function(e){var t=e.list,a=e.handleSelect;return Object(n.jsx)("ul",{className:"loc-list",onClick:a,children:Object(n.jsx)(x,{list:t})})};function w(e){return e=Number(e),"".concat(e.toFixed(0))}function k(e){return new Date(1e3*e)}function g(e){return k(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function N(e){var t=k(e);return t=t.toLocaleString("en-US",{weekday:"long",month:"short",day:"numeric"})}function C(e){var t=k(e),a=t.toLocaleString("en-US",{month:"long",day:"numeric"}),n=t.toLocaleTimeString(),c=n.lastIndexOf(":");return"".concat(a,", ").concat(n.slice(0,c)," ").concat(n.slice(-2))}var T="cbd0e28fa8714e914f987309d303663d",S="https://api.openweathermap.org/data/2.5";function _(e){var t="".concat("https://api.weatherapi.com/v1","/search.json?key=").concat("45deedb7f0c648958d2214959200112","&q=").concat(e);return fetch(t).then((function(e){return e.json()}))}function D(e){var t={current:e.current,forecast:e.daily};t.current.dt=C(t.current.dt),t.current.temp=w(t.current.temp),t.current.feels_like=w(t.current.feels_like);for(var a=0;a<t.forecast.length;a++){var n=t.forecast[a];n.weeklyDT=N(n.dt),n.dt=C(n.dt),n.temp.day=w(n.temp.day),n.feels_like.day=w(n.feels_like.day),n.sunrise=g(n.sunrise),n.sunset=g(n.sunset),n.temp.day=w(n.temp.day),n.temp.night=w(n.temp.night),t.forecast[a]=n}return t}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"imperial",a="minutely,hourly,alerts",n="";n="kelvin"===t?new URL("".concat(S,"/onecall?lat=").concat(e.lat,"&lon=").concat(e.lon,"&exclude=").concat(a,"&appid=").concat(T)):new URL("".concat(S,"/onecall?lat=").concat(e.lat,"&lon=").concat(e.lon,"&exclude=").concat(a,"&units=").concat(t,"&appid=").concat(T));var c=fetch(n).then((function(e){return e.json()}));return c}var U=function(e){var t=e.currentLocation,a=e.locationDispatch,r=Object(c.useState)(null),s=Object(d.a)(r,2),i=s[0],o=s[1],j=v(""),p=Object(d.a)(j,3),m=p[0],h=p[1],b=p[2];function f(){return(f=Object(u.a)(l.a.mark((function e(t){var a,n,c,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==m){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,_(m);case 5:for(a=e.sent,n=[],c=0;c<a.length;c++)r=a[c].name.split(","),s=r[0]+","+r[1],n.push({name:s,id:"".concat(a[c].id),dataCoords:{lat:a[c].lat,lon:a[c].lon}});o(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){e.preventDefault();var t=e.target.id;if(t){var n=i.find((function(e){return e.id===t})),c={name:n.name,dataCoords:n.dataCoords};a({type:"new location",payload:c}),o(null),b("")}}return Object(n.jsxs)("div",{className:"loc-search",onClick:x,children:[Object(n.jsx)(y,{value:m,handleChange:h,handleClear:function(e){e.preventDefault(),b(""),o(null)},handleSubmit:function(e){return f.apply(this,arguments)},placeholder:t}),Object(n.jsx)(O,{list:i,handleSelect:x})]})};var F=function(e){var t=e.currentView,a=e.handleSelection,c="current-forecast-item",r={today:"today"===t?"".concat(c,"--active"):c,tomorrow:"tomorrow"===t?"".concat(c,"--active"):c,weekly:"weekly"===t?"".concat(c,"--active"):c};return Object(n.jsx)("nav",{children:Object(n.jsxs)("ul",{className:"current-forecast-list",onClick:a,children:[Object(n.jsx)("li",{id:"today",className:r.today,children:"today"}),Object(n.jsx)("li",{id:"tomorrow",className:r.tomorrow,children:"tomorrow"}),Object(n.jsx)("li",{id:"weekly",className:r.weekly,children:"weekly"})]})})};var I=function(e){var t=e.unitTypeSymbol,a=e.currentDay,c=e.forecast,r=e.city;if(!c)return null;var s=null,i=null,o=null,l=null,u=null,d=null;a?(s=a.temp,i=a.feels_like,o=a.weather[0],l=a.dt,u=c[0].sunrise,d=c[0].sunset):(s=c[1].temp.day,i=c[1].feels_like.day,o=c[1].weather[0],l=c[1].dt,u=c[1].sunrise,d=c[1].sunset);var j="assets/weather-icons/".concat(o.icon);return Object(n.jsxs)("div",{className:"current-forecast",children:[Object(n.jsx)("div",{className:"date",children:l}),Object(n.jsx)("div",{className:"city",children:r}),Object(n.jsx)("div",{className:"description",children:o.main}),Object(n.jsxs)("div",{className:"icon-wrapper",children:[Object(n.jsx)("img",{className:"icon",src:"".concat(j,".svg"),alt:"weather status icon"}),Object(n.jsxs)("div",{className:"current-temp",children:[s,Object(n.jsx)(m,{unitType:t})]})]}),Object(n.jsx)("hr",{}),Object(n.jsxs)("div",{className:"info",children:[Object(n.jsxs)("div",{className:"feels-like",children:[Object(n.jsx)(p,{imgData:{path:"assets/weather-icons/temperature",alt:"temperature icon"}}),Object(n.jsxs)("div",{children:["Feels like ".concat(i),Object(n.jsx)(m,{})]})]}),Object(n.jsxs)("div",{className:"sunrise",children:[Object(n.jsx)(p,{imgData:{path:"assets/weather-icons/sunrise",alt:"sunrise icon"}}),u]}),Object(n.jsxs)("div",{className:"sunset",children:[Object(n.jsx)(p,{imgData:{path:"assets/weather-icons/sunset",alt:"sunset icon"}}),d]})]})]})};var R=function(e){var t=e.info,a=w(100*t.pop);return Object(n.jsxs)("div",{className:"additional-info",children:[a>0&&Object(n.jsx)("span",{className:"chance-of-rain",children:"Chance of rain: ".concat(a,"%")}),Object(n.jsx)("span",{className:"humidity",children:"Humidity: ".concat(t.humidity,"%")}),Object(n.jsx)("span",{className:"uv-index",children:"UV Index: ".concat(t.uvi)}),Object(n.jsx)("span",{className:"sunset-sunrise",children:"Sunrise/Sunset: ".concat(t.sunrise,", ").concat(t.sunset)})]})};var V=function(e){var t=e.day,a=e.additionalInfoID,c=e.handleDaySelect,r=t.weeklyDT,s=t.weather[0],i=w(t.temp.max),o=w(t.temp.min),l={addClasses:"forecast-day__icon",path:"".concat("assets/weather-icons/","/").concat(s.icon),alt:"weather icon"},u=a===r?"forecast-day toggled":"forecast-day";return Object(n.jsxs)("li",{className:u,id:r,onClick:c,children:[Object(n.jsx)("div",{className:"forecast-day__date",children:r}),Object(n.jsx)("div",{className:"forecast-day__status",children:s.description}),Object(n.jsx)(p,{imgData:l}),Object(n.jsxs)("div",{className:"forecast-day__max",children:[i,Object(n.jsx)(m,{})]}),Object(n.jsxs)("div",{className:"forecast-day__min",children:[o,Object(n.jsx)(m,{})]}),Object(n.jsx)(p,{imgData:{addClasses:"arrow-down",path:"assets/nav/arrow_down",alt:"expands / closes additional weather info"}}),a===r&&Object(n.jsx)(R,{info:t})]})};var q=function(e){var t=e.forecast,a=Object(c.useState)(null),r=Object(d.a)(a,2),s=r[0],i=r[1];if(!t)return null;function o(e){if(e){var t=e.currentTarget.id,a=null;s!==t&&(a=t),i(a)}}var l=t.map((function(e){return Object(n.jsx)(V,{day:e,additionalInfoID:s,handleDaySelect:o},e.dt)}));return Object(n.jsx)("ul",{className:"forecast-weekly",children:l})};var B=function(e){var t=e.unitType,a=e.currentDay,r=e.forecast,s=e.currentLocation,i=Object(c.useState)("today"),o=Object(d.a)(i,2),l=o[0],u=o[1],j=null,p={imperial:"F",metric:"C",kelvin:"K"}[t];return s&&(j=s.split(",")[0]),Object(n.jsxs)("section",{className:"forecast-view",children:[Object(n.jsx)(F,{currentView:l,handleSelection:function(e){var t=e.target.id;if(t)switch(t){case"today":u("today");break;case"tomorrow":u("tomorrow");break;case"weekly":u("weekly")}}}),"weekly"===l&&Object(n.jsx)(q,{forecast:r}),"today"===l&&Object(n.jsx)(I,{unitTypeSymbol:p,currentDay:a,forecast:r,city:j}),"tomorrow"===l&&Object(n.jsx)(I,{unitTypeSymbol:p,forecast:r,city:j})]})},E=(a(15),{currentLocation:{name:null,dataCoords:null},temperatureUnitType:"imperial",currentDay:null,forecast:null});function J(e,t){switch(t.type){case"new location":return{currentLocation:t.payload,temperatureUnitType:e.temperatureUnitType,currentDay:null,forecast:null};case"update forecast":return Object(j.a)(Object(j.a)({},e),{},{currentDay:t.payload.current,forecast:t.payload.forecast});case"update unit type":if(e.temperatureUnitType!==t.payload.unitType){var a=t.payload.unitType;return{currentLocation:e.currentLocation,temperatureUnitType:a,currentDay:t.payload.weather.current,forecast:t.payload.weather.forecast}}return e;default:return e}}var K=function(e){var t=Object(c.useReducer)(J,E),a=Object(d.a)(t,2),r=a[0],s=a[1];function i(){return(i=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(t===r.temperatureUnitType){e.next=10;break}return e.next=5,L(r.currentLocation.dataCoords,t);case 5:if(a=e.sent){e.next=8;break}return e.abrupt("return");case 8:n=D(a),s({type:"update unit type",payload:{weather:n,unitType:t}});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(r.currentLocation.dataCoords,r.temperatureUnitType);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:a=D(t),s({type:"update forecast",payload:a});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.currentLocation.dataCoords&&function(){e.apply(this,arguments)}()}),[r.currentLocation.dataCoords]),Object(n.jsxs)("main",{role:"main",className:"rain-or-shine",children:[Object(n.jsx)(U,{currentLocation:r.currentLocation.name,locationDispatch:s}),Object(n.jsx)(B,{unitType:r.temperatureUnitType,currentDay:r.currentDay,forecast:r.forecast,currentLocation:r.currentLocation.name}),Object(n.jsx)(h,{handleUnitUpdate:function(e){return i.apply(this,arguments)}})]})},P=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,17)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(K,{})}),document.getElementById("root")),P()}},[[16,1,2]]]);
//# sourceMappingURL=main.3a31ee88.chunk.js.map